<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CAS搭建+MySQL认证+自定义加密+PHP客户端 | 苹果·真·好吃</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="第一篇博客，折腾了好久，以前没什么写博客的习惯，这次强行装个B
工程环境以及模块版本
CentOS 6.3 x86_64
Java 1.7
CAS-server 4.0.0
tomcat 6
MySQL 5.1
PHP 5.3.3

安装Java环境Java应该都会装，懒得写了。。。">
<meta property="og:type" content="article">
<meta property="og:title" content="CAS搭建+MySQL认证+自定义加密+PHP客户端">
<meta property="og:url" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/index.html">
<meta property="og:site_name" content="苹果·真·好吃">
<meta property="og:description" content="第一篇博客，折腾了好久，以前没什么写博客的习惯，这次强行装个B
工程环境以及模块版本
CentOS 6.3 x86_64
Java 1.7
CAS-server 4.0.0
tomcat 6
MySQL 5.1
PHP 5.3.3

安装Java环境Java应该都会装，懒得写了。。。">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_start_error.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_without_ssl.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_server_config.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_https_error.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_server_protocol.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_https_error1.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/keysore_permission_reference.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_success.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/apache_cas_client_error.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_php_client_login.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_redirect.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_client_login_success_redirect.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_logout_success.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config1.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/foodies_data.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/mvn_package_success.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config2.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config3.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_casServiceValidationSuccess_config.jpg">
<meta property="og:image" content="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_client_login_success_redirect1.jpg">
<meta property="og:updated_time" content="2016-03-13T10:16:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CAS搭建+MySQL认证+自定义加密+PHP客户端">
<meta name="twitter:description" content="第一篇博客，折腾了好久，以前没什么写博客的习惯，这次强行装个B
工程环境以及模块版本
CentOS 6.3 x86_64
Java 1.7
CAS-server 4.0.0
tomcat 6
MySQL 5.1
PHP 5.3.3

安装Java环境Java应该都会装，懒得写了。。。">
  
    <link rel="alternative" href="/atom.xml" title="苹果·真·好吃" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">苹果·真·好吃</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">不是技术博客！不是技术博客！不是技术博客！重说三！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.changg-1991.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-CAS搭建-MySQL认证-自定义加密-PHP客户端" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/" class="article-date">
  <time datetime="2015-11-13T08:55:46.000Z" itemprop="datePublished">2015-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      CAS搭建+MySQL认证+自定义加密+PHP客户端
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>第一篇博客，折腾了好久，以前没什么写博客的习惯，这次强行装个B</p>
<h2 id="工程环境以及模块版本">工程环境以及模块版本</h2><ol>
<li>CentOS 6.3 x86_64</li>
<li>Java 1.7</li>
<li>CAS-server 4.0.0</li>
<li>tomcat 6</li>
<li>MySQL 5.1</li>
<li>PHP 5.3.3</li>
</ol>
<h2 id="安装Java环境">安装Java环境</h2><p>Java应该都会装，懒得写了。。。</p>
<a id="more"></a>
<h2 id="部署tomcat">部署tomcat</h2><p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install tomcat6.x86_64</span><br></pre></td></tr></table></figure></p>
<p>启动<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service tomcat6 start</span><br></pre></td></tr></table></figure></p>
<p>tomcat日志(/var/log/tomcat6/catalina.out)中有一个报错<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_start_error.jpg" alt=""></p>
<ul>
<li><p>安装OpenSSL</p>
</li>
<li><p>安装APR(Apache Portable Runtime)</p>
</li>
<li><p>安装tomcat-native</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ tar zxvf tomcat-native.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> ./tomcat-native-<span class="number">1.1</span>.<span class="number">33</span>-src/jni/native</span><br><span class="line">$ ./configure --with-apr=/usr/<span class="built_in">local</span>/apr --with-java-home=/usr/<span class="built_in">local</span>/java</span><br><span class="line">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>加载APR的环境变量，编辑/etc/profile，添加</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib</span><br><span class="line">export LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>
<p>然后执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
<p>重启tomcat，解决~</p>
</li>
</ul>
<h2 id="部署CAS-server">部署CAS-server</h2><p>官网：<a href="http://developer.jasig.org/cas/" target="_blank" rel="external">http://developer.jasig.org/cas/</a></p>
<p>下载，上传服务器，解压<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp ./cas-server-<span class="number">4.0</span>.<span class="number">0</span>/modules/cas-server-webapp-<span class="number">4.0</span>.<span class="number">0</span>.war /usr/share/tomcat6/webapps/cas.war</span><br></pre></td></tr></table></figure></p>
<p>访问：<a href="http://cas.changg-1991.com:8080/cas/login" target="_blank" rel="external">http://cas.changg-1991.com:8080/cas/login</a><br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_without_ssl.jpg" alt=""><br>此时还没有使用https，所以会有一个警告，接下来给自己颁发证书</p>
<ul>
<li>生成证书<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ keytool -genkey -alias changg-<span class="number">1991</span>_cas -keyalg RSA -keystore /root/cas.keystore</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>把信息按照提示输入</p>
<ul>
<li><p>导出证书</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ keytool -export -file /root/changg-<span class="number">1991</span>_cas.crt -alias changg-<span class="number">1991</span>_cas -keystore /root/changg-<span class="number">1991</span>_cas.keystore</span><br></pre></td></tr></table></figure>
</li>
<li><p>导入证书<br>这一步似乎不需要，我按照网上的办法导入提示：证书回复与秘钥库中的证书是相同的</p>
</li>
<li>编辑tomcat配置文件server.xml<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_server_config.jpg" alt=""><br>重启tomcat，日志中有一个报错<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_https_error.jpg" alt=""><br>查了半天，原来是修改server.xml中SSL的属性protocol为org.apache.coyote.http11.Http11Protocol，参考<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_server_protocol.jpg" alt=""><br>重启tomcat，之前的报错消失，出现新的问题<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/tomcat_https_error1.jpg" alt=""><br>原来是权限问题，把keysore拷贝到/home/下面一个专门的文件夹，修改文件夹用户组权限为：tomcat.tomcat，同时修改server.xml中对应的配置，参考<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/keysore_permission_reference.jpg" alt=""><br>重启tomcat，报错消失，还有几个没有什么卵用的报错暂时忽略，访问：<a href="https://cas.changg-1991.com:8443/cas/login?locale=zh_CN" target="_blank" rel="external">https://cas.changg-1991.com:8443/cas/login?locale=zh_CN</a><br>弹出证书无效的提示，无视之，点击继续<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login.jpg" alt=""></li>
</ul>
<p>默认的账号密码又坑了我一会儿，网上铺天盖地的说只要账号密码一致就可以登录，屁啊，那是哪年的版本了，终于找到一个靠谱的说法，我又去配置文件里找了一下果然账号是casuser，密码是Mellon(不知道Mellon是个什么鬼)，成功登录<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_success.jpg" alt=""><br>至此CAS-server部署完毕~</p>
<h2 id="部署CAS-client">部署CAS-client</h2><p>官网：<a href="http://developer.jasig.org/cas-clients/" target="_blank" rel="external">http://developer.jasig.org/cas-clients/</a></p>
<p>搞了一会儿，想了想不对，我最终是用PHP实现这个客户端，所以去github上搜了一下“cas php”找到：<a href="https://github.com/Jasig/phpCAS" target="_blank" rel="external">https://github.com/Jasig/phpCAS</a><br>工程下载下来并没有文档和demo，囧，用sourcetree clone了一份，有了，测试一下，访问：<a href="http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php" target="_blank" rel="external">http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php</a><br>500错误，需要重命名配置文件为config.php<br>编辑config.php，配置$cas_host、$cas_context和$cas_port为刚刚搭建好的CAS-server的相关值，保存退出重新访问，又报500错误，apache的error_log报错<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/apache_cas_client_error.jpg" alt=""><br>原来是缺少php-xml模块，yum装上，重启apache，再次访问<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_php_client_login.jpg" alt=""><br>点击login跳转到<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_login_redirect.jpg" alt=""><br>输入用户名密码点击登录<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_client_login_success_redirect.jpg" alt=""><br>点击Logout<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_logout_success.jpg" alt=""><br>PHP的CAS-client搭建成功~</p>
<h2 id="配置CAS连接MySQL进行认证">配置CAS连接MySQL进行认证</h2><p>拷贝cas-server-support-jdbc-4.0.0.jar<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /root/cas-server-<span class="number">4.0</span>.<span class="number">0</span>/modules/cas-server-support-jdbc-<span class="number">4.0</span>.<span class="number">0</span>.jar /usr/share/tomcat6/webapps/cas-server-webapp-<span class="number">4.0</span>.<span class="number">0</span>/WEB-INF/lib/</span><br></pre></td></tr></table></figure></p>
<p>下载mysql-connector-java，官网：<a href="http://dev.mysql.com/downloads/connector/j/" target="_blank" rel="external">http://dev.mysql.com/downloads/connector/j/</a><br>上传服务器<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /root/mysql-connector-java-<span class="number">5.1</span>.<span class="number">37</span>-bin.jar /usr/share/tomcat6/webapps/cas-server-webapp-<span class="number">4.0</span>.<span class="number">0</span>/WEB-INF/lib/</span><br></pre></td></tr></table></figure></p>
<p>编辑cas/WEB-INF/deployerConfigContext.xml，注释掉<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config.jpg" alt=""><br>与注释同等级的地方增加标签：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"mysqlAuthenticationHandler"</span></span><br><span class="line">      <span class="attribute">class</span>=<span class="value">"org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"sql"</span> <span class="attribute">value</span>=<span class="value">"select password from foodies where foodname=?"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"dataSource"</span> <span class="attribute">ref</span>=<span class="value">"dataSource"</span> /&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"dataSource"</span> <span class="attribute">class</span>=<span class="value">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"driverClassName"</span>&gt;</span><span class="tag">&lt;<span class="title">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="title">value</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"url"</span>&gt;</span><span class="tag">&lt;<span class="title">value</span>&gt;</span>jdbc:mysql://localhost:3306/cas_auth<span class="tag">&lt;/<span class="title">value</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"username"</span>&gt;</span><span class="tag">&lt;<span class="title">value</span>&gt;</span>root<span class="tag">&lt;/<span class="title">value</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"password"</span>&gt;</span><span class="tag">&lt;<span class="title">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="title">value</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>接下来在下面还需要进行一个修改<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config1.jpg" alt=""></p>
<p>数据库建库cau_auth<br>建表foodies<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`foodies`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`foodname`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`salt`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`zh_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`status_flag`</span> tinyint(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">  <span class="string">`created_at`</span> <span class="keyword">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  <span class="string">`updated_at`</span> <span class="keyword">timestamp</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'0000-00-00 00:00:00'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`index_foodname`</span> (<span class="string">`foodname`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span></span><br></pre></td></tr></table></figure></p>
<p>在数据库中插入一条数据，重启tomcat，访问：<a href="http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php" target="_blank" rel="external">http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php</a><br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/foodies_data.jpg" alt=""><br>用插入的账号密码去登录，验证OK，此时密码是明文的，接下来自定义加密方式</p>
<h2 id="CAS自定义加密方式">CAS自定义加密方式</h2><p>这个地方是最最最蛋疼的，搞了好久，网上的东西不是CAS-server版本和我用的不一样，就是根本用不了，要不还有就简简单单的一个MD5加密，本着对系统负责任的态度，决定搞的彻底一些，用sha1(salt+md5(password))的模式，这块最后做下来并没有很复杂的改动，说到底就是一个耐心和坚持，还好最终搞出来了，和大家分享一下</p>
<ol>
<li><p>首先修改deployerConfigContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"sql"</span> <span class="attribute">value</span>=<span class="value">"select salt, password from foodies where foodname=?"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重写cas-server-support-jdbc/src/main/java/org/jasig/cas/adaptors/jdbc/QueryDatabaseAuthenticationHandler.java<br>这个就是cas-server-support-jdbc.jar的源码，在下载下来的CAS-server包里有</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 新建一个内部类Foodies</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Foodies</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String salt;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalt</span><span class="params">(<span class="keyword">final</span> String salt)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.salt = salt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(<span class="keyword">final</span> String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">getSalt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.salt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * 继承RowMapper，重写mapRow的方法</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">FoodiesRowMapper</span> <span class="keyword">implements</span> <span class="title">RowMapper</span> </span>&#123;      </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">mapRow</span><span class="params">(ResultSet resultSet, <span class="keyword">int</span> value)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        Foodies foodies = <span class="keyword">new</span> Foodies();</span><br><span class="line">        foodies.setSalt(resultSet.getString(<span class="string">"salt"</span>));</span><br><span class="line">        foodies.setPassword(resultSet.getString(<span class="string">"password"</span>));</span><br><span class="line">        <span class="keyword">return</span> foodies;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> HandlerResult <span class="title">authenticateUsernamePasswordInternal</span><span class="params">(<span class="keyword">final</span> UsernamePasswordCredential credential)</span></span><br><span class="line">        <span class="keyword">throws</span> GeneralSecurityException, PreventedException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> String username = credential.getUsername();</span><br><span class="line">    <span class="comment">// final String encryptedPassword = this.getPasswordEncoder().encode(credential.getPassword());</span></span><br><span class="line">    <span class="keyword">final</span> String password = <span class="keyword">this</span>.getPasswordEncoder().encode(credential.getPassword());</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// final String dbPassword = getJdbcTemplate().queryForObject(this.sql, String.class, username);</span></span><br><span class="line">        <span class="comment">// 这个地方和源代码不同的地方就在于，查出来的是一个RowMapper类的对象，可以携带多个值返回，对应上面配置中的select salt, password from foodies</span></span><br><span class="line">        <span class="keyword">final</span> Foodies foodies   = (Foodies)getJdbcTemplate().queryForObject(<span class="keyword">this</span>.sql, <span class="keyword">new</span> FoodiesRowMapper(), username);</span><br><span class="line">        <span class="keyword">final</span> String salt       = foodies.getSalt();</span><br><span class="line">        <span class="keyword">final</span> String dbPassword = foodies.getPassword();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 自定义的加密方式，直接替换之前的明文比较的办法，md5和sha1是用messageDigest类实现的方法</span></span><br><span class="line">        <span class="keyword">final</span> String encryptedPassword = <span class="keyword">this</span>.sha1(salt + <span class="keyword">this</span>.md5(password));</span><br><span class="line">        <span class="keyword">if</span> (!dbPassword.equals(encryptedPassword)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> FailedLoginException(<span class="string">"Password does not match value on record."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> IncorrectResultSizeDataAccessException e) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.getActualSize() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AccountNotFoundException(username + <span class="string">" not found with SQL query"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> FailedLoginException(<span class="string">"Multiple records found for "</span> + username);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> DataAccessException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> PreventedException(<span class="string">"SQL exception while executing query for "</span> + username, e);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (<span class="keyword">final</span> NoSuchAlgorithmException ignored) &#123;</span><br><span class="line">        <span class="comment">// 这个exception是md5和sha1抛出来的</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> createHandlerResult(credential, <span class="keyword">new</span> SimplePrincipal(username), <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>然后打jar包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jar cvf cas-server-support-jdbc-<span class="number">4.0</span>.<span class="number">0</span>.jar cas-server-support-jdbc/</span><br></pre></td></tr></table></figure></p>
<p>用这个jar包去覆盖cas/WEB-INF/lib/cas-server-support-jdbc-4.0.0.jar<br>重启tomcat报了无数行的错误。。。我并不会java，都是边查边写的，我一直以为是我代码写错了，改了又改，直到问了我们安卓<a href="http://tsichi.info/" target="_blank" rel="external">@大锅</a>，他告诉我这是maven打的包，这才又有一丝希望，累觉不爱。。。<br>mac安装maven环境<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install maven</span><br></pre></td></tr></table></figure></p>
<p>继续打包，cd到cas-server-support-jdbc源码下面<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn package</span><br></pre></td></tr></table></figure></p>
<p>打了很久很久，很多downloading。。。，最后失败了，又和<a href="http://tsichi.info/" target="_blank" rel="external">@大锅</a>调了半天，改了一下pom.xml<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn clean package -DskipTests=<span class="literal">true</span> -Dlicense.skip=<span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p>终于成功了！<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/mvn_package_success.jpg" alt=""></p>
<p>修改数据库中password字段为sha1(“yan”+md5(“123456”))<br>重启tomcat，访问：<a href="http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php" target="_blank" rel="external">http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php</a><br>尝试用root和123456去登录，成功！</p>
<h2 id="CAS登录获取更多用户信息">CAS登录获取更多用户信息</h2><p>编辑deployerConfigContext.xml，注释掉<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config2.jpg" alt=""><br>在同一级的位置新增<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">class</span>=<span class="value">"org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao"</span> <span class="attribute">id</span>=<span class="value">"attributeRepository"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">constructor-arg</span> <span class="attribute">index</span>=<span class="value">"0"</span> <span class="attribute">ref</span>=<span class="value">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">constructor-arg</span> <span class="attribute">index</span>=<span class="value">"1"</span> <span class="attribute">value</span>=<span class="value">"select foodname, email from foodies where &#123;0&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"queryAttributeMapping"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">entry</span> <span class="attribute">key</span>=<span class="value">"username"</span> <span class="attribute">value</span>=<span class="value">"foodname"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"resultAttributeMapping"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">entry</span> <span class="attribute">key</span>=<span class="value">"email"</span> <span class="attribute">value</span>=<span class="value">"email"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在下面还需要做一个修改<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_deployerConfigContext_config3.jpg" alt=""></p>
<p>编辑cas/WEB-INF/view/jsp/protocol/2.0/casServiceValidationSuccess.jsp<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_server_casServiceValidationSuccess_config.jpg" alt=""></p>
<p>客户端用phpCAS::getAttribute(‘email’)方法获取额外信息<br>重启tomcat，访问：<a href="http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php" target="_blank" rel="external">http://www.changg-1991.com/phpCAS/docs/examples/example_gateway.php</a><br>返回页面<br><img src="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/cas_client_login_success_redirect1.jpg" alt=""><br>Mission Compete!</p>
<p>接下来要做的事</p>
<ol>
<li>防止SQL注入</li>
<li>更改登录界面</li>
</ol>
<p>CAS防止sql注入暂时用一个非常严格(select)的本机连接授权给解决了</p>
<p>参考<br><a href="http://www.micmiu.com/enterprise-app/sso/sso-cas-sample/" target="_blank" rel="external">http://www.micmiu.com/enterprise-app/sso/sso-cas-sample/</a><br><a href="http://www.micmiu.com/enterprise-app/sso/cas-server-auth-db/" target="_blank" rel="external">http://www.micmiu.com/enterprise-app/sso/cas-server-auth-db/</a><br><a href="http://www.kafeitu.me/sso/2010/11/05/sso-cas-full-course.html" target="_blank" rel="external">http://www.kafeitu.me/sso/2010/11/05/sso-cas-full-course.html</a><br><a href="http://showerlee.blog.51cto.com/2047005/1265405" target="_blank" rel="external">http://showerlee.blog.51cto.com/2047005/1265405</a><br><a href="http://www.tuicool.com/articles/7ZbEju" target="_blank" rel="external">http://www.tuicool.com/articles/7ZbEju</a><br><a href="http://www.mkyong.com/spring/spring-jdbctemplate-querying-examples/" target="_blank" rel="external">http://www.mkyong.com/spring/spring-jdbctemplate-querying-examples/</a><br><a href="http://pkaq.github.io/2015/01/14/2015-01-14-CAS/" target="_blank" rel="external">http://pkaq.github.io/2015/01/14/2015-01-14-CAS/</a></p>
<p>著作权归作者所有，商业转载请联系作者获得授权，非商业转载请注明出处<br>作者：changg-1991<br>链接：<a href="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端">http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.changg-1991.com/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/" data-id="cimxb7j1j000qcq2bgzbjqp35" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CAS/">CAS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP客户端/">PHP客户端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SSO/">SSO</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/单点登录/">单点登录</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自定义加密方式/">自定义加密方式</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/连接MySQL认证/">连接MySQL认证</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/12/06/第一次买物理机/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          第一次买物理机
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAS/">CAS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP客户端/">PHP客户端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAID/">RAID</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSO/">SSO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单点登录/">单点登录</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作/">工作</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/应届生/">应届生</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/服务器/">服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毕业/">毕业</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/硬件/">硬件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/硬盘/">硬盘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简历/">简历</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/职位/">职位</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自定义加密方式/">自定义加密方式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/连接MySQL认证/">连接MySQL认证</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选型/">选型</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CAS/" style="font-size: 10px;">CAS</a> <a href="/tags/PHP客户端/" style="font-size: 10px;">PHP客户端</a> <a href="/tags/RAID/" style="font-size: 10px;">RAID</a> <a href="/tags/SSO/" style="font-size: 10px;">SSO</a> <a href="/tags/单点登录/" style="font-size: 10px;">单点登录</a> <a href="/tags/工作/" style="font-size: 20px;">工作</a> <a href="/tags/应届生/" style="font-size: 20px;">应届生</a> <a href="/tags/服务器/" style="font-size: 10px;">服务器</a> <a href="/tags/毕业/" style="font-size: 20px;">毕业</a> <a href="/tags/硬件/" style="font-size: 10px;">硬件</a> <a href="/tags/硬盘/" style="font-size: 10px;">硬盘</a> <a href="/tags/简历/" style="font-size: 10px;">简历</a> <a href="/tags/职位/" style="font-size: 10px;">职位</a> <a href="/tags/自定义加密方式/" style="font-size: 10px;">自定义加密方式</a> <a href="/tags/连接MySQL认证/" style="font-size: 10px;">连接MySQL认证</a> <a href="/tags/选型/" style="font-size: 10px;">选型</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/06/简单说说找工作——关于各种职位的日常/">简单说说找工作——关于各种职位的日常</a>
          </li>
        
          <li>
            <a href="/2016/03/13/简单说说找工作——关于简历/">简单说说找工作——关于简历</a>
          </li>
        
          <li>
            <a href="/2015/12/06/第一次买物理机/">第一次买物理机</a>
          </li>
        
          <li>
            <a href="/2015/11/13/CAS搭建-MySQL认证-自定义加密-PHP客户端/">CAS搭建+MySQL认证+自定义加密+PHP客户端</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 chang_1991(QQ#314789171)<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>